---
pageClass: CaseStudyX
---

<% content_for(:head) do %>
  <%= dato_meta_tags(caseStudy) %>
<% end %>

<%= partial './partials/global/hero', 
  locals:{
    type: 'caseStudyX',
    mobile_image: caseStudy.banner_gallery[0],
    med_image: caseStudy.banner_gallery[1],
    large_image: caseStudy.banner_gallery[2],
    headingLine1: caseStudy.heading_line_1,
    headingLine2: caseStudy.heading_line_2,
    isShopify: caseStudy.platform,
    overlayOpacity: caseStudy.hero_overlay_opacity
  } 
%>
<div class="space-120 space-bottom-120 mobile-space-60 mobile-space-bottom-60">
  <%= partial './partials/supercasestudy/two-column-text',
    locals:{
      heading1:'Challenge',
      heading2:'Solution',
      body1: caseStudy.challenge_body,
      body2: caseStudy.solution_body,
      modifier:'special'
    }
  %>
</div>
<%= partial './partials/supercasestudy/overview-image',
  locals:{
    image: caseStudy.overview_image
  }
%>
<%= partial './partials/supercasestudy/browsing',
  locals:{
    video: caseStudy.website_browsing_video,
    heading: caseStudy.website_browsing_heading,
    body: caseStudy.website_browsing_body
  }
%>
<%= partial './partials/supercasestudy/brand-story',
  locals:{
    heading: caseStudy.brand_story_heading,
    body: caseStudy.brand_story_body,
    images: caseStudy.brand_story_images
  }
%>
<%= partial './partials/supercasestudy/video',
  locals:{
    coverImage: caseStudy.cover_image,
    videoMP4: caseStudy.video_mp4,
    videoWEBM: caseStudy.video_webm,
    enable: caseStudy.show_video
  }
%>
<%= partial './partials/supercasestudy/mobile',
  locals:{
    heading: caseStudy.mobile_section_heading,
    body: caseStudy.mobile_section_body,
    images: caseStudy.mobile_section_images
  }
%>


<%= partial './partials/supercasestudy/quote',
  locals:{
    name: caseStudy.quote_person,
    body: caseStudy.quote_body,
    job: caseStudy.quote_person_job_title,
    image: caseStudy.quote_person_image
  }
%>
<%= partial './partials/supercasestudy/next-study' %>

<div class="space-200 space-bottom-150 mobile-space-bottom-0">
  <div class="container m">
    <%= partial './partials/homepage/download-section' %>
  </div>
</div>

<script>
  // Also can pass in optional settings block
  var rellax = new Rellax('.rellax', {
    speed: 1,
    center: false,
    round: true,
    vertical: true,
    horizontal: false
  });

  $(document).ready(function(){
    var controller = new ScrollMagic.Controller();

    $('.js-percent-value').each(function (index) {
      var currentStatistic = $(this);
      var trigger = $('#trigger-' + index)[0];
      var goalPercent = $(currentStatistic).data('percent');
      var offset = 0;
      switch(index) {
        case 0:
          offset = 100;
          break;
        case 1:
          offset = -200;
          break;
        default:
          offset = -200;
      } 
      new ScrollMagic.Scene({
        triggerElement: trigger,
        duration: 2000,
        offset: offset
      })
      .on('start', function () {
        function isFloat(n){
          return Number(n) === n && n % 1 !== 0;
        }

        if($(currentStatistic).text()=='0'){
          $(currentStatistic).prop('Counter',0).animate({
            Counter: goalPercent
          }, 
          {
            duration: 1000,
            easing: 'swing',
            step: function (now) {
              if(isFloat(goalPercent)){
                $(currentStatistic).text(Math.round(now * 100)/100);
              }else{
                $(currentStatistic).text(Math.ceil(now));
              }
            }
          });
        }
      })
      .addTo(controller);//.addIndicators();
    });
  });
</script>